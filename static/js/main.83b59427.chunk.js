(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{139:function(e){e.exports={abi:'[{"constant":false,"inputs":[],"name":"LegalContractManager","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[],"name":"kill","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"getOwner","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"checksum","type":"string"}],"name":"getLastEventBlockNumber","outputs":[{"name":"","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"newOwner","type":"address"}],"name":"changeOwner","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[{"name":"checksum","type":"string"},{"name":"signature","type":"bytes"}],"name":"triggerEvent","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"anonymous":false,"inputs":[{"indexed":false,"name":"checksum","type":"string"},{"indexed":false,"name":"signature","type":"bytes"},{"indexed":false,"name":"previousEventBlock","type":"uint256"}],"name":"ContractEvent","type":"event"}]',bytecode:"608060405234801561001057600080fd5b50610516806100206000396000f3006080604052600436106100775763ffffffff7c01000000000000000000000000000000000000000000000000000000006000350416631b8202a7811461007c57806341c0e1b514610093578063893d20e8146100a85780639a72a1a7146100d9578063a6f9dae114610144578063c668b2b514610165575b600080fd5b34801561008857600080fd5b506100916101fc565b005b34801561009f57600080fd5b50610091610233565b3480156100b457600080fd5b506100bd61026e565b60408051600160a060020a039092168252519081900360200190f35b3480156100e557600080fd5b506040805160206004803580820135601f810184900484028501840190955284845261013294369492936024939284019190819084018382808284375094975061027d9650505050505050565b60408051918252519081900360200190f35b34801561015057600080fd5b50610091600160a060020a03600435166102e5565b34801561017157600080fd5b506040805160206004803580820135601f810184900484028501840190955284845261009194369492936024939284019190819084018382808284375050604080516020601f89358b018035918201839004830284018301909452808352979a9998810197919650918201945092508291508401838280828437509497506103129650505050505050565b6102046104e6565b6000805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a0392909216919091179055565b600054600160a060020a031615806102555750600054600160a060020a031633145b151561026057600080fd5b600054600160a060020a0316ff5b600054600160a060020a031690565b60006001826040518082805190602001908083835b602083106102b15780518252601f199092019160209182019101610292565b51815160209384036101000a6000190180199092169116179052920194855250604051938490030190922054949350505050565b600054600160a060020a031615806103075750600054600160a060020a031633145b151561020457600080fd5b60006001836040518082805190602001908083835b602083106103465780518252601f199092019160209182019101610327565b51815160209384036101000a60001901801990921691161790529201948552506040519384900381018420548751909550439460019450889350918291908401908083835b602083106103aa5780518252601f19909201916020918201910161038b565b51815160209384036101000a6000190180199092169116179052920194855250604080519485900382018520959095559383018590525050606080825285519082015284517fc23af02e8833b234299b28dc17267556946a193c14f2bff0f53e9f16159821839286928692869282918282019160808401919088019080838360005b8381101561044457818101518382015260200161042c565b50505050905090810190601f1680156104715780820380516001836020036101000a031916815260200191505b50838103825285518152855160209182019187019080838360005b838110156104a457818101518382015260200161048c565b50505050905090810190601f1680156104d15780820380516001836020036101000a031916815260200191505b509550505050505060405180910390a1505050565b33905600a165627a7a723058208e5a6aec10f5c9ff4b0ca9047389b98597c814b725a17d1d8e647a8068408ab40029",functionHashes:{"LegalContractManager()":"1b8202a7","changeOwner(address)":"a6f9dae1","getLastEventBlockNumber(string)":"9a72a1a7","getOwner()":"893d20e8","kill()":"41c0e1b5","triggerEvent(string,bytes)":"c668b2b5"},gasEstimates:{creation:[300,260400],external:{"LegalContractManager()":20473,"changeOwner(address)":21216,"getLastEventBlockNumber(string)":null,"getOwner()":581,"kill()":31024,"triggerEvent(string,bytes)":null},internal:{"currentUser()":14}},runtimeBytecode:"6080604052600436106100775763ffffffff7c01000000000000000000000000000000000000000000000000000000006000350416631b8202a7811461007c57806341c0e1b514610093578063893d20e8146100a85780639a72a1a7146100d9578063a6f9dae114610144578063c668b2b514610165575b600080fd5b34801561008857600080fd5b506100916101fc565b005b34801561009f57600080fd5b50610091610233565b3480156100b457600080fd5b506100bd61026e565b60408051600160a060020a039092168252519081900360200190f35b3480156100e557600080fd5b506040805160206004803580820135601f810184900484028501840190955284845261013294369492936024939284019190819084018382808284375094975061027d9650505050505050565b60408051918252519081900360200190f35b34801561015057600080fd5b50610091600160a060020a03600435166102e5565b34801561017157600080fd5b506040805160206004803580820135601f810184900484028501840190955284845261009194369492936024939284019190819084018382808284375050604080516020601f89358b018035918201839004830284018301909452808352979a9998810197919650918201945092508291508401838280828437509497506103129650505050505050565b6102046104e6565b6000805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a0392909216919091179055565b600054600160a060020a031615806102555750600054600160a060020a031633145b151561026057600080fd5b600054600160a060020a0316ff5b600054600160a060020a031690565b60006001826040518082805190602001908083835b602083106102b15780518252601f199092019160209182019101610292565b51815160209384036101000a6000190180199092169116179052920194855250604051938490030190922054949350505050565b600054600160a060020a031615806103075750600054600160a060020a031633145b151561020457600080fd5b60006001836040518082805190602001908083835b602083106103465780518252601f199092019160209182019101610327565b51815160209384036101000a60001901801990921691161790529201948552506040519384900381018420548751909550439460019450889350918291908401908083835b602083106103aa5780518252601f19909201916020918201910161038b565b51815160209384036101000a6000190180199092169116179052920194855250604080519485900382018520959095559383018590525050606080825285519082015284517fc23af02e8833b234299b28dc17267556946a193c14f2bff0f53e9f16159821839286928692869282918282019160808401919088019080838360005b8381101561044457818101518382015260200161042c565b50505050905090810190601f1680156104715780820380516001836020036101000a031916815260200191505b50838103825285518152855160209182019187019080838360005b838110156104a457818101518382015260200161048c565b50505050905090810190601f1680156104d15780820380516001836020036101000a031916815260200191505b509550505050505060405180910390a1505050565b33905600a165627a7a723058208e5a6aec10f5c9ff4b0ca9047389b98597c814b725a17d1d8e647a8068408ab40029"}},143:function(e,t,a){e.exports=a(346)},148:function(e,t,a){},185:function(e,t){},187:function(e,t){},212:function(e,t){},229:function(e,t){},231:function(e,t){},262:function(e,t){},346:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),c=a(137),r=a.n(c),s=(a(148),a(14)),l=a(15),i=a(17),f=a(16),d=a(18),u=a(349),m=a(347),p=a(348),b=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(f.a)(t).call(this,e))).updateLocalStorage=function(){localStorage.setItem("consortiaId",a.consortiaId.current.value),localStorage.setItem("appCredsUsername",a.appCredsUsername.current.value),localStorage.setItem("appCredsPassword",a.appCredsPassword.current.value),localStorage.setItem("nodeRpcEndpoint",a.nodeRpcEndpoint.current.value),localStorage.setItem("hdwalletRpcEndpoint",a.hdwalletRpcEndpoint.current.value),localStorage.setItem("hdwalletWalletId",a.hdwalletWalletId.current.value),localStorage.setItem("ipfsRpcEndpoint",a.ipfsRpcEndpoint.current.value),localStorage.setItem("openlawRpcEndpoint",a.openlawRpcEndpoint.current.value),localStorage.setItem("idRegistryRpcEndpoint",a.idRegistryRpcEndpoint.current.value),alert("latest settings saved!")},a.consortiaId=o.a.createRef(),a.appCredsUsername=o.a.createRef(),a.appCredsPassword=o.a.createRef(),a.nodeRpcEndpoint=o.a.createRef(),a.hdwalletRpcEndpoint=o.a.createRef(),a.hdwalletWalletId=o.a.createRef(),a.ipfsRpcEndpoint=o.a.createRef(),a.openlawRpcEndpoint=o.a.createRef(),a.idRegistryRpcEndpoint=o.a.createRef(),a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.consortiaId.current.value=localStorage.getItem("consortiaId"),this.appCredsUsername.current.value=localStorage.getItem("appCredsUsername"),this.appCredsPassword.current.value=localStorage.getItem("appCredsPassword"),this.nodeRpcEndpoint.current.value=localStorage.getItem("nodeRpcEndpoint"),this.hdwalletRpcEndpoint.current.value=localStorage.getItem("hdwalletRpcEndpoint"),this.hdwalletWalletId.current.value=localStorage.getItem("hdwalletWalletId"),this.ipfsRpcEndpoint.current.value=localStorage.getItem("ipfsRpcEndpoint"),this.openlawRpcEndpoint.current.value=localStorage.getItem("openlawRpcEndpoint"),this.idRegistryRpcEndpoint.current.value=localStorage.getItem("idRegistryRpcEndpoint")}},{key:"render",value:function(){var e=this;return o.a.createElement("main",{className:"container"},o.a.createElement("h2",null,"Configure"),o.a.createElement("h5",null,"This is needed so the samples can connect to your Kaleido environment. All information will be persisted to browser local storage."),o.a.createElement("br",null),o.a.createElement("h5",null,"Shared"),o.a.createElement("div",{className:"form-group row"},o.a.createElement("label",{className:"col-sm-2 col-form-label"},"Consortia ID"),o.a.createElement("div",{className:"col-sm-4"},o.a.createElement("input",{type:"text",className:"form-control col-sm-12",ref:this.consortiaId}),o.a.createElement("small",null,"(ex: zzabcd1234)"))),o.a.createElement("div",{className:"form-group row"},o.a.createElement("label",{className:"col-sm-2 col-form-label"},"App credentials username"),o.a.createElement("div",{className:"col-sm-4"},o.a.createElement("input",{type:"text",className:"form-control col-sm-12",ref:this.appCredsUsername}))),o.a.createElement("div",{className:"form-group row"},o.a.createElement("label",{className:"col-sm-2 col-form-label"},"App credentials password"),o.a.createElement("div",{className:"col-sm-6"},o.a.createElement("input",{type:"password",className:"form-control col-sm-12",ref:this.appCredsPassword}))),o.a.createElement("div",{className:"form-group row"},o.a.createElement("label",{className:"col-sm-2 col-form-label"},"Node RPC endpoint"),o.a.createElement("div",{className:"col-sm-6"},o.a.createElement("input",{type:"text",className:"form-control col-sm-12",ref:this.nodeRpcEndpoint}),o.a.createElement("small",null,"(ex: https://zz..-zz..-rpc.us-east-2.kaleido.io)"))),o.a.createElement("h5",null,"HDWallet"),o.a.createElement("div",{className:"form-group row"},o.a.createElement("label",{className:"col-sm-2 col-form-label"},"HDWallet RPC endpoint"),o.a.createElement("div",{className:"col-sm-6"},o.a.createElement("input",{type:"text",className:"form-control col-sm-12",ref:this.hdwalletRpcEndpoint}),o.a.createElement("small",null,"(ex: https://zz..-zz..-hdwallet.us-east-2.kaleido.io)"))),o.a.createElement("div",{className:"form-group row"},o.a.createElement("label",{className:"col-sm-2 col-form-label"},"HDWallet wallet ID"),o.a.createElement("div",{className:"col-sm-4"},o.a.createElement("input",{type:"text",className:"form-control col-sm-12",ref:this.hdwalletWalletId}))),o.a.createElement("h5",null,"IPFS"),o.a.createElement("div",{className:"form-group row"},o.a.createElement("label",{className:"col-sm-2 col-form-label"},"IPFS RPC endpoint"),o.a.createElement("div",{className:"col-sm-6"},o.a.createElement("input",{type:"text",className:"form-control col-sm-12",ref:this.ipfsRpcEndpoint}),o.a.createElement("small",null,"(ex: https://zz..-zz..-ipfs.us-east-2.kaleido.io)"))),o.a.createElement("h5",null,"ID Registry"),o.a.createElement("div",{className:"form-group row"},o.a.createElement("label",{className:"col-sm-2 col-form-label"},"ID Registry RPC endpoint"),o.a.createElement("div",{className:"col-sm-6"},o.a.createElement("input",{type:"text",className:"form-control col-sm-12",ref:this.idRegistryRpcEndpoint}),o.a.createElement("small",null,"(ex: https://zz..-zz..-idregistry.us-east-2.kaleido.io)"))),o.a.createElement("h5",null,"OpenLaw"),o.a.createElement("div",{className:"form-group row"},o.a.createElement("label",{className:"col-sm-2 col-form-label"},"OpenLaw RPC endpoint"),o.a.createElement("div",{className:"col-sm-6"},o.a.createElement("input",{type:"text",className:"form-control col-sm-12",ref:this.openlawRpcEndpoint}),o.a.createElement("small",null,"(ex: https://zz..-zz..-openlaw.us-east-2.kaleido.io)"))),o.a.createElement("div",{className:"form-group row"},o.a.createElement("div",{className:"col-sm-6"},o.a.createElement("button",{type:"button",className:"btn btn-success",onClick:function(){return e.updateLocalStorage()}},"Save"))))}}]),t}(n.Component),h=a(8),g=a.n(h),E=a(22),y=a(5),w=a(72),v=a(138),C=a.n(v),N={bindLocalStorage:function(e){e.consortiaId=localStorage.getItem("consortiaId"),e.appCredsUsername=localStorage.getItem("appCredsUsername"),e.appCredsPassword=localStorage.getItem("appCredsPassword"),e.nodeRpcEndpoint=localStorage.getItem("nodeRpcEndpoint"),e.hdwalletRpcEndpoint=localStorage.getItem("hdwalletRpcEndpoint"),e.hdwalletWalletId=localStorage.getItem("hdwalletWalletId"),e.ipfsRpcEndpoint=localStorage.getItem("ipfsRpcEndpoint"),e.openlawRpcEndpoint=localStorage.getItem("openlawRpcEndpoint"),e.idRegistryRpcEndpoint=localStorage.getItem("idRegistryRpcEndpoint")},buildWeb3:function(e){e.appCredsUsername&&e.appCredsPassword&&e.nodeRpcEndpoint&&I.buildWeb3(e)},getContract:function(e,t,a,n){var o=JSON.parse(t.abi),c="0x"+t.bytecode;try{var r=new e.eth.Contract(o,a);return a||(r=r.deploy({data:c,arguments:n})),r}catch(s){console.error("Failed to get contract",s)}return null},buildServiceUrlWithCreds:function(e,t){var a=t.startsWith("http://")?"http://":"https://";return"".concat(a).concat(e.appCredsUsername,":").concat(e.appCredsPassword,"@").concat(t.replace(a,""))}},I={buildWeb3:function(e){e.web3=new C.a(N.buildServiceUrlWithCreds(e,e.nodeRpcEndpoint))}},S=N;var R=function(e){return o.a.createElement("main",null,o.a.createElement("div",{className:"container"},o.a.createElement("h2",null,e.header),"missing\xa0",o.a.createElement(m.a,{to:"/"},"config")))},k=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(f.a)(t).call(this,e))).componentDidMount=function(){a.consortiaId&&a.appCredsUsername&&a.appCredsPassword&&a.nodeRpcEndpoint&&a.hdwalletRpcEndpoint&&a.hdwalletWalletId?(a.blockExplorerUrl=a.nodeRpcEndpoint.endsWith("dev.photic.io")?"explorer-dev.photic.io":"explorer.kaleido.io",a.setState(function(){return{msg:"Sample message"}})):a.setState(function(){return{missingConfig:!0}})},a.msgChanged=function(e){var t=e.target.value;a.setState(function(){return{msg:t}})},a.lockMsg=function(){a.setState(function(){return{locked:!0}})},a.fetchHdwallet=function(){a.setState(function(){return{hdwalletAddress:"",hdwalletPrivateKey:"",fetchingHdwalletIndex:!0}},Object(E.a)(g.a.mark(function e(){var t;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.hasHdwalletIndex()){e.next=5;break}return e.next=3,a.getHdwalletAccount(a.state.hdwalletIndex);case 3:t=e.sent,a.setState(function(){return{hdwalletAddress:t.address,hdwalletPrivateKey:t.privateKey,fetchingHdwalletIndex:!1}});case 5:case"end":return e.stop()}},e,this)})))},a.hasHdwalletIndex=function(){return a.state.hdwalletIndex&&a.state.hdwalletIndex>=0},a.hdwalletIndexChanged=function(e){var t=e.target.value;a.setState(function(){return{hdwalletIndex:t}})},a.deployingContract=function(){a.setState(function(){return{contractDeploying:!0}},function(){return a.deployContract()})},a.deployContract=function(){var e={gas:5e8,data:S.getContract(a.web3,w,"",[a.state.msg]).encodeABI()};a.web3.eth.accounts.signTransaction(e,"0x".concat(a.state.hdwalletPrivateKey)).then(function(e){a.web3.eth.sendSignedTransaction(e.rawTransaction).on("receipt",function(e){console.log(e)}).on("error",function(e){console.error("Failed to deploy the smart contract. Error: "+e)}).then(function(e){console.log(e),console.log("\tSmart contract deployed, ready to take calls at '".concat(e.contractAddress,"'")),a.setState(function(){return{contractAddress:e.contractAddress,contractFrom:e.from,transactionHash:e.transactionHash}})})})},a.getContractValue=function(){S.getContract(a.web3,w,a.state.contractAddress,[]).methods.get().call().then(function(e){console.log("\tSmart contract current state: %j",e),a.setState(function(){return{contractValue:e}})})},a.getHdwalletAccount=function(e){console.log("fetching hd wallet account to use");var t=new Headers;return t.append("Authorization","Basic "+btoa(a.appCredsUsername+":"+a.appCredsPassword)),t.append("content-type","application/json"),t.append("Accept","application/json, text/plain, */*"),fetch("".concat(a.hdwalletRpcEndpoint,"/api/v1/wallets/").concat(a.hdwalletWalletId,"/accounts/").concat(e),{method:"GET",headers:t}).then(function(e){return e.json()})},S.bindLocalStorage(Object(y.a)(Object(y.a)(a))),S.buildWeb3(Object(y.a)(Object(y.a)(a))),a.state={missingConfig:!1,msg:"",locked:!1,hdwalletAddress:"",hdwalletPrivateKey:"",hdwalletIndex:"",fetchingHdwalletIndex:!1,contractDeploying:!1,contractAddress:"",contractFrom:"",contractValue:"",transactionHash:""},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return this.state.missingConfig?o.a.createElement(R,{header:"HDWallet"}):o.a.createElement("main",{className:"container"},o.a.createElement("h2",null,"HDWallet"),o.a.createElement("h5",null,"The purpose of this sample is to show how you can anonymously submit a transaction to the blockchain. We will deploy a simple smart contract which stores and exposes a single value."),o.a.createElement("br",null),o.a.createElement("h6",null,"Step 1: Enter a message. This message is the value that will be included in the smart contract when we deploy it in the next step."),o.a.createElement("div",null,o.a.createElement("div",{className:"form-group row"},o.a.createElement("label",{className:"col-sm-2 col-form-label"},"Message"),o.a.createElement("div",{className:"col-sm-7"},o.a.createElement("textarea",{disabled:this.state.locked,onChange:this.msgChanged,className:"form-control",rows:"2",value:this.state.msg})),this.state.locked?null:o.a.createElement("div",{className:"col-sm-3"},o.a.createElement("button",{disabled:!this.state.msg,type:"button",className:"btn btn-primary",onClick:function(){return e.lockMsg()}},"Next"))),this.state.locked?o.a.createElement("div",null,o.a.createElement("h6",null,"Step 2: Let's choose an account generated by your HDWallet to sign the transaction that deploys our contract containing the above message."),o.a.createElement("div",{className:"form-group row"},o.a.createElement("label",{className:"col-sm-2 col-form-label"},"HDWallet account index"),o.a.createElement("div",{className:"col-sm-2"},o.a.createElement("input",{type:"number",min:"0",max:"10000",className:"form-control col-sm-12",disabled:this.state.contractDeploying,value:this.state.hdwalletIndex,onChange:this.hdwalletIndexChanged})),this.state.contractDeploying?null:o.a.createElement("div",{className:"col-sm-3"},o.a.createElement("button",{disabled:this.state.fetchingHdwalletIndex||!this.hasHdwalletIndex(),type:"button",className:"btn btn-primary",onClick:function(){return e.fetchHdwallet()}},"Fetch HDWallet account"))),o.a.createElement("div",{className:"form-group row"},o.a.createElement("label",{className:"col-sm-2 col-form-label"},"HDWallet address"),o.a.createElement("div",{className:"col-sm-7"},o.a.createElement("input",{type:"text",className:"form-control col-sm-12",readOnly:!0,value:this.state.hdwalletAddress}))),o.a.createElement("div",{className:"form-group row"},o.a.createElement("label",{className:"col-sm-2 col-form-label"},"HDWallet signing key"),o.a.createElement("div",{className:"col-sm-7"},o.a.createElement("input",{type:"text",className:"form-control col-sm-12",readOnly:!0,value:this.state.hdwalletPrivateKey})),!this.state.contractDeploying&&this.state.hdwalletAddress&&this.state.hdwalletPrivateKey?o.a.createElement("div",{className:"col-sm-3"},o.a.createElement("button",{type:"button",className:"btn btn-success",onClick:function(){return e.deployingContract()}},"Deploy to blockchain!")):null,this.state.contractDeploying&&!this.state.contractAddress?o.a.createElement("div",{className:"col-sm-3"},o.a.createElement("button",{type:"button",disabled:!0,className:"btn btn-success"},"Deploying to blockchain...")):null)):null,this.state.contractAddress?o.a.createElement("div",null,o.a.createElement("h6",null,"Step 3: Congrats!",o.a.createElement("br",null),"The contract has been deployed to the following address: ",o.a.createElement("i",null,this.state.contractAddress),".",o.a.createElement("br",null),"On the blockchain ledger, this",o.a.createElement("a",{target:"blank",href:"https://".concat(this.blockExplorerUrl,"/tx/").concat(this.state.transactionHash,"?consortia=").concat(this.consortiaId,"&environment=").concat(this.nodeRpcEndpoint.substr(8,10))}," transaction "),"shows that it originated from ",o.a.createElement("i",null,this.state.contractFrom),". Notice that this is the account you chose to use from your HDWallet and ",o.a.createElement("b",null,"not")," your Kaleido node's account address. For future transactions, you can sequentially iterate through the wallet accounts and obtain a different signing key for every transaction. For complete anonymity you should never use a signing key more than once."),o.a.createElement("br",null),o.a.createElement("h6",null,"Step 4: Verification - lets query the contract's value"),o.a.createElement("div",{className:"form-group row"},o.a.createElement("label",{className:"col-sm-2 col-form-label"},"Contract value"),o.a.createElement("div",{className:"col-sm-7"},o.a.createElement("input",{type:"text",className:"form-control col-sm-12",readOnly:!0,value:this.state.contractValue})),this.state.contractValue?null:o.a.createElement("div",{className:"col-sm-3"},o.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){return e.getContractValue()}},"Get contract value"))),this.state.contractValue?o.a.createElement("h6",null,"Conclusion: Notice that the value stored in the blockchain contract matches your message above."):null):null))}}]),t}(n.Component),x=a(73),A=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(f.a)(t).call(this,e))).componentDidMount=function(){a.appCredsUsername&&a.appCredsPassword&&a.nodeRpcEndpoint&&a.ipfsRpcEndpoint||a.setState(function(){return{missingConfig:!0}})},a.fileChangedHandler=function(e){var t=e.target.files[0];t?a.setState(function(){return{selectedFile:t}}):a.setState(function(){return{selectedFile:null}})},a.uploadToIpfs=function(){a.setState(function(){return{uploadingFile:!0}},function(){var e=new Headers;e.append("Authorization","Basic "+btoa(a.appCredsUsername+":"+a.appCredsPassword)),e.append("Accept","application/json, text/plain, */*");var t=new FormData;t.append("blob",a.state.selectedFile),fetch("".concat(a.ipfsRpcEndpoint,"/api/v0/add"),{method:"POST",headers:e,body:t}).then(function(e){return e.json()}).then(function(e){console.log(e);var t=S.buildServiceUrlWithCreds(Object(y.a)(Object(y.a)(a)),"".concat(a.ipfsRpcEndpoint,"/api/v0"));a.setState(function(){return{ipfsHash:e.Hash,ipfsLink:"".concat(t,"/cat/").concat(e.Hash),uploadedFile:!0,uploadingFile:!1}})})})},a.fileDescriptionChanged=function(e){var t=e.target.value;a.setState(function(){return{fileDescription:t}})},a.deployingContract=function(){a.setState(function(){return{contractDeploying:!0}},function(){return a.deployContract()})},a.getContractValues=function(){S.getContract(a.web3,x,a.state.contractAddress,[]).methods.get().call().then(function(e){console.log("\tSmart contract current state: %j",e),a.setState(function(){return{contractFileDescription:e[0],contractIpfsHash:e[1]}})})},a.downloadFile=function(){var e=new Headers;e.append("Authorization","Basic "+btoa(a.appCredsUsername+":"+a.appCredsPassword)),e.append("Accept","application/json, text/plain, */*");var t="".concat(a.ipfsRpcEndpoint,"/api/v0/get/").concat(a.state.ipfsHash);fetch(t,{method:"GET",headers:e})},S.bindLocalStorage(Object(y.a)(Object(y.a)(a))),S.buildWeb3(Object(y.a)(Object(y.a)(a))),a.state={missingConfig:!1,selectedFile:null,uploadingFile:!1,uploadedFile:!1,ipfsHash:"",ipfsLink:"",fileDescription:"",contractDeploying:!1,contractAddress:"",contractFileDescription:"",contractIpfsHash:""},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"deployContract",value:function(){var e=Object(E.a)(g.a.mark(function e(){var t,a,n,o,c=this;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.web3.eth.personal.getAccounts();case 2:t=e.sent,a=S.getContract(this.web3,x,"",[this.state.fileDescription,this.state.ipfsHash]),n=a.encodeABI(),o={from:t[0],gas:5e8,data:n},this.web3.eth.sendTransaction(o).on("receipt",function(e){console.log(e)}).on("error",function(e){console.error("Failed to deploy the smart contract. Error: "+e)}).then(function(e){console.log(e),console.log("\tSmart contract deployed, ready to take calls at '".concat(e.contractAddress,"'")),c.setState(function(){return{contractAddress:e.contractAddress}})});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.state.missingConfig?o.a.createElement(R,{header:"IPFS"}):o.a.createElement("main",{className:"container"},o.a.createElement("h2",null,"IPFS"),o.a.createElement("h5",null,"The purpose of this sample is to show how you can add a file to IPFS, and then store a description of the file along with the IPFS content hash in a blockchain smart contract. This is a popular pattern for storing large amounts of data off-chain (in IPFS) and storing the reference (IPFS content hash) of where the data is located on-chain."),o.a.createElement("br",null),o.a.createElement("h6",null,"Step 1: Add a file to IPFS and retrieve the IPFS hash back once it's been added."),o.a.createElement("div",{className:"form-group row"},o.a.createElement("label",{className:"col-sm-2 col-form-label"},"Upload a file"),o.a.createElement("div",{className:"col-sm-3"},o.a.createElement("input",{disabled:this.state.uploadedFile,type:"file",onChange:this.fileChangedHandler,ref:this.fileRef})),this.state.uploadedFile?null:o.a.createElement("div",{className:"col-sm-5"},o.a.createElement("button",{disabled:!this.state.selectedFile||this.state.uploadingFile,type:"button",className:"btn btn-primary",onClick:function(){return e.uploadToIpfs()}},"Upload file"))),this.state.uploadedFile?o.a.createElement("div",null,o.a.createElement("h6",null,"Step 2: The file has been added to IPFS with the following content hash: ",o.a.createElement("i",null,this.state.ipfsHash),".",o.a.createElement("br",null)," Enter a friendly file description for this file and then we can deploy the smart contract containing the description and IPFS content hash."),o.a.createElement("div",{className:"form-group row"},o.a.createElement("label",{className:"col-sm-2 col-form-label"},"File description"),o.a.createElement("div",{className:"col-sm-7"},o.a.createElement("input",{type:"text",className:"form-control col-sm-12",readOnly:this.state.contractDeploying,onChange:this.fileDescriptionChanged,value:this.state.fileDescription})),this.state.contractDeploying?null:o.a.createElement("div",{className:"col-sm-3"},o.a.createElement("button",{disabled:!this.state.fileDescription,type:"button",className:"btn btn-success",onClick:function(){return e.deployingContract()}},"Deploy to blockchain!")),this.state.contractDeploying&&!this.state.contractAddress?o.a.createElement("div",{className:"col-sm-3"},o.a.createElement("button",{type:"button",disabled:!0,className:"btn btn-success"},"Deploying to blockchain...")):null)):null,this.state.contractAddress?o.a.createElement("div",null,o.a.createElement("h6",null,"Step 3: Congrats!",o.a.createElement("br",null),"The contract has been deployed to the following address: ",o.a.createElement("i",null,this.state.contractAddress),"."),o.a.createElement("br",null),o.a.createElement("h6",null,"Step 4: Verification - lets query the contract's values"),o.a.createElement("div",{className:"form-group row"},o.a.createElement("label",{className:"col-sm-2 col-form-label"},"File description"),o.a.createElement("div",{className:"col-sm-7"},o.a.createElement("input",{type:"text",className:"form-control col-sm-12",readOnly:!0,value:this.state.contractFileDescription}))),o.a.createElement("div",{className:"form-group row"},o.a.createElement("label",{className:"col-sm-2 col-form-label"},"IPFS content hash"),o.a.createElement("div",{className:"col-sm-7"},o.a.createElement("input",{type:"text",className:"form-control col-sm-12",readOnly:!0,value:this.state.contractIpfsHash})),this.state.contractFileDescription||this.state.contractIpfsHash?null:o.a.createElement("div",{className:"col-sm-3"},o.a.createElement("button",{type:"button",className:"btn btn-primary",onClick:function(){return e.getContractValues()}},"Get contract values")))):null,this.state.contractFileDescription&&this.state.contractIpfsHash?o.a.createElement("div",null,o.a.createElement("h6",null,"Conclusion: Download file from IPFS using the IPFS content hash"),o.a.createElement("div",{className:"col-sm-3"},o.a.createElement("a",{href:this.state.ipfsLink,target:"_blank",rel:"noopener noreferrer",className:"btn btn-primary"},"Download file"))):null)}}]),t}(n.Component),O=a(139),j=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(f.a)(t).call(this,e))).componentDidMount=function(){a.appCredsUsername&&a.appCredsPassword&&a.nodeRpcEndpoint&&a.openlawRpcEndpoint||a.setState(function(){return{missingConfig:!0}})},a.fetchJWT=function(){console.log("getting jwt");var e=new Headers;e.append("Authorization","Basic "+btoa(a.appCredsUsername+":"+a.appCredsPassword)),e.append("Content-Type","application/x-www-form-urlencoded"),fetch(a.openlawRpcEndpoint+"/app/login",{body:"userId=joseph.bonfiglio@consensys.net&password=testPassword1!",headers:e,method:"post"}).then(function(e){var t=e.headers.get("openlaw_jwt");console.log("openlaw_jwt",t)})},a.fetchTemplate=function(){console.log("getting template");var e=new Headers;e.append("Authorization","Basic "+btoa(a.appCredsUsername+":"+a.appCredsPassword)),e.append("openlaw_jwt",a.state.openlaw_jwt),fetch(a.openlawRpcEndpoint+"/template/raw/test",{headers:e,method:"GET"}).then(function(e){return e.json()}).then(function(e){return console.log(e)})},a.register=function(){console.log("register user");var e=new Headers;e.append("Authorization","Basic "+btoa(a.appCredsUsername+":"+a.appCredsPassword)),e.append("Content-Type","application/x-www-form-urlencoded"),fetch(a.openlawRpcEndpoint+"/register",{body:"userId=joseph.bonfiglio@consensys.net&password=testPassword1!&password2=testPassword1!&name=Joe",headers:e,method:"post"}).then(function(e){return 200===e.status?console.log("register success"):console.log("register failed")})},a.configureChain=function(){console.log("configuring chain");var e=new Headers;e.append("Authorization","Basic "+btoa(a.appCredsUsername+":"+a.appCredsPassword)),e.append("Content-Type","application/x-www-form-urlencoded"),e.append("openlaw_jwt",a.state.openlaw_jwt);var t=a.nodeRpcEndpoint.startsWith("http://")?"http://":"https://",n="".concat(t).concat(a.state.systemCreds,"@").concat(a.nodeRpcEndpoint.replace(t,""));fetch(a.openlawRpcEndpoint+"/ethereum/private/configure",{body:"url=".concat(encodeURIComponent(n),"&chainId=").concat(a.state.chainId,"&signatureAddress=").concat(a.state.contractAddress),headers:e,method:"post"}).then(function(e){200===e.status?console.log("configure success"):console.log("configure failed")})},a.changeNetworkToPrivate=function(){console.log("configure network as private");var e=new Headers;e.append("Authorization","Basic "+btoa(a.appCredsUsername+":"+a.appCredsPassword)),e.append("openlaw_jwt",a.state.openlaw_jwt),fetch(a.openlawRpcEndpoint+"/ethereum/changeEthereumNetwork/Private",{headers:e,method:"get"}).then(function(e){200===e.status?console.log("change network to private success"):console.log("change network to private failed"),console.log(e.json())})},a.createTemplate=function(){console.log("creating test template");var e=new Headers;e.append("Authorization","Basic "+btoa(a.appCredsUsername+":"+a.appCredsPassword)),e.append("content-type","text/plain;charset=UTF-8"),e.append("openlaw_jwt",a.state.openlaw_jwt);var t="".concat(a.openlawRpcEndpoint,"/upload/template/").concat(a.state.sampleAgreementTitle);return fetch(t,{method:"POST",headers:e,body:a.state.sampleAgreement}).then(function(e){return e.json()}).then(function(e){return console.log(e)})},S.bindLocalStorage(Object(y.a)(Object(y.a)(a))),S.buildWeb3(Object(y.a)(Object(y.a)(a))),a.state={missingConfig:!1,systemCreds:"zzm2cidm83:HuII2FdGEet5Vl91IKAipZxBvNHMRgwqLjxv7E1LGq0",chainId:979323005,openlaw_jwt:"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJleHAiOjE1NDExOTYxNjIsIm5iZiI6MTU0MTEwOTc2MiwiaWF0IjoxNTQxMTA5NzYyLCJ1c2VySWQiOiIxODYyNGU0Ni00ZGQ3LTQ0OGEtYjBjOS01ZWI0ODc3N2FhNDIifQ.jDQxAVPVcEBrNCrdyLh4LbzWTZM-RwMrz9IAPKj6XZ0",contractAddress:"0x96C72788E31d452C408D41262fdC470FDBe25FEd",contractExistsInLocalStorage:!1,sampleAgreement:"\n      This is an angreement between two parties: [[PartyA | Uppercase]] and [[PartyB | Uppercase]] and is made as of [[Effective Date: Date]].  Both parties agree that the next time they see each other a high-five will take place in which one person raises their right-hand in a vertical orientation with their fingers and thumb either together or spread slightly apart and the other person does the same.  Then they slap their palms together in a momentary fashion to create a slappy noise.\n        \n**[[PartyA | Uppercase]]:**\n\n[[PartyA Email: Identity]]\n__________________________________________\n\n\n**[[PartyB | Uppercase]]:**\n\n[[PartyB Email: Identity]]\n__________________________________________\n\n      ",sampleAgreementTitle:"test"},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"deployContract",value:function(){var e=Object(E.a)(g.a.mark(function e(){var t,a,n,o,c=this;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.web3.eth.personal.getAccounts();case 2:t=e.sent,a=S.getContract(this.web3,O,"",[]),n=a.encodeABI(),o={from:t[0],gas:5e8,data:n},this.web3.eth.sendTransaction(o).on("receipt",function(e){console.log(e)}).on("error",function(e){console.error("Failed to deploy the smart contract. Error: "+e)}).then(function(e){console.log(e),console.log("\tSmart contract deployed, ready to take calls at '".concat(e.contractAddress,"'")),c.setState(function(){return{contractAddress:e.contractAddress,contractExistsInLocalStorage:!0}},function(){return console.log(e.contractAddress)})});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return this.state.missingConfig?o.a.createElement(R,{header:"OpenLaw"}):o.a.createElement("main",{className:"container"},o.a.createElement("h2",null,"OpenLaw"),o.a.createElement("h5",null,"The purpose of this sample is to show how you can create an OpenLaw template which triggers an embedded smart contract once it's signed by all parties involved."),o.a.createElement("br",null),o.a.createElement("h6",null,"Deploy a sample agreement contract"),o.a.createElement("h6",null,"Step 1:",o.a.createElement("button",{className:"btn btn-sm btn-link",onClick:function(){return e.register()}},"register first user"),o.a.createElement("button",{className:"btn btn-sm btn-link",onClick:function(){return e.fetchJWT()}},"Get JWT"),o.a.createElement("button",{className:"btn btn-sm btn-link",onClick:function(){return e.createTemplate()}},"create template"),o.a.createElement("button",{className:"btn btn-sm btn-link",onClick:function(){return e.fetchTemplate()}},"get template"),o.a.createElement("button",{className:"btn btn-sm btn-link",onClick:function(){return e.deployContract()}},"deploy contract"),o.a.createElement("button",{className:"btn btn-sm btn-link",onClick:function(){return e.configureChain()}},"configure chain"),o.a.createElement("button",{className:"btn btn-sm btn-link",onClick:function(){return e.changeNetworkToPrivate()}},"set network to private")),o.a.createElement("h6",null,"Step 2: Create a sample OpenLaw contract template"))}}]),t}(n.Component),_=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(f.a)(t).call(this,e))).componentDidMount=function(){a.appCredsUsername&&a.appCredsPassword&&a.nodeRpcEndpoint&&a.idRegistryRpcEndpoint||a.setState(function(){return{missingConfig:!0}})},a.fetchDirectory=function(){a.setState(function(){return{fetchingDirectory:!0}},function(){var e=new Headers;e.append("Authorization","Basic "+btoa(a.appCredsUsername+":"+a.appCredsPassword)),e.append("Accept","application/json, text/plain, */*");var t="".concat(a.idRegistryRpcEndpoint,"/api/v1/directories");fetch(t,{method:"GET",headers:e}).then(function(e){return e.json()}).then(function(e){var t=e[0];a.setState(function(){return{directoryContractAddress:t.directory}})})})},S.bindLocalStorage(Object(y.a)(Object(y.a)(a))),S.buildWeb3(Object(y.a)(Object(y.a)(a))),a.state={missingConfig:!1,fetchingDirectory:!1,directoryContractAddress:""},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this;return this.state.missingConfig?o.a.createElement(R,{header:"ID Registry"}):o.a.createElement("main",{className:"container"},o.a.createElement("h2",null,"ID Registry"),o.a.createElement("h5",null,"The purpose of this sample is to show how you can use Kaleido's ID Registry service to create an organization and add users to that organization."),o.a.createElement("br",null),this.state.directoryContractAddress?o.a.createElement("div",null,o.a.createElement("h6",null,"The directories contract has been deployed to the following address: ",o.a.createElement("i",null,this.state.directoryContractAddress),"."),o.a.createElement("h6",null,"Next up: let's bind your verified organizational identity (i.e. the validated x509 cert) with an Ethereum account and establish an on-chain organizational identity")):o.a.createElement("div",null,o.a.createElement("h6",null,"Fetch directory contract address from ID Registry service"),o.a.createElement("div",{className:"col-sm-5"},o.a.createElement("button",{disabled:this.state.fetchingDirectory,type:"button",className:"btn btn-primary",onClick:function(){return e.fetchDirectory()}},"Get contract address"))))}}]),t}(n.Component),D=a(36),P=a(74),H=a(140),F=a.n(H),T=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(f.a)(t).call(this,e))).componentDidMount=function(){a.appCredsUsername&&a.appCredsPassword&&a.nodeRpcEndpoint?a.state.contractAddress&&a.getNumberOfRecords():a.setState(function(){return{missingConfig:!0}})},a.deployingContract=function(){a.setState(function(){return{modifyingContract:!0}},function(){return a.deployContract()})},a.msgChanged=function(e){var t=e.target.value;a.setState(function(){return{msg:t,validMsg:a.isJSON(t)}})},a.isJSON=function(e){if("string"!==typeof e)return!1;try{return JSON.parse(e),!0}catch(t){return!1}},a.addMsg=function(){a.setState(function(){return{addingMsg:!0}},Object(E.a)(g.a.mark(function e(){var t,n,o;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=S.getContract(a.web3,D,a.state.contractAddress,[]),e.next=3,a.web3.eth.personal.getAccounts();case 3:return n=e.sent,o={from:n[0],gas:5e6},e.next=7,t.methods.push(n[0],a.state.msg).send(o).on("error",function(e){console.error("Failed to call the smart contract. Error: "+e)}).then(function(e){console.log(e),a.setState(function(){return{msg:"",addingMsg:!1,validMsg:!1,auditRecordCount:a.state.auditRecordCount+1}},function(){return a.fetchRecord(a.state.auditRecordCount-1)})});case 7:case"end":return e.stop()}},e,this)})))},a.fetchRecord=function(e){a.setState(function(){return{fetchingRecord:!0,viewJsonMessage:"Fetching record #".concat(e+1,"...")}},Object(E.a)(g.a.mark(function t(){var n,o;return g.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=S.getContract(a.web3,D,a.state.contractAddress,[]),t.next=3,n.methods.logEntries(e).call();case 3:o=t.sent,a.setState(function(){return{viewRecordId:e+1,viewPrettyJson:o.payload,viewRecordEntityAddress:o.entityAddress,fetchingRecord:!1}});case 5:case"end":return t.stop()}},t,this)})))},a.editingContract=function(){a.setState(function(){return{showEditingContract:!a.state.showEditingContract}})},a.clearContract=function(){a.setState(function(){return{modifyingContract:!0}},function(){localStorage.removeItem("auditLogContractAddress"),window.location.reload()})},a.changeContractAddress=function(){a.setState(function(){return{modifyingContract:!0}},function(){S.getContract(a.web3,D,a.state.editContractAddress,[])||(alert("invalid contract address"),a.setState(function(){return{modifyingContract:!1}})),localStorage.setItem("auditLogContractAddress",a.state.editContractAddress),window.location.reload()})},a.editContractAddressChanged=function(e){var t=e.target.value;a.setState(function(){return{editContractAddress:t,editContractAddressValid:t.startsWith("0x")&&42===t.length}})},a.editContractPanel=function(){return o.a.createElement("div",null,o.a.createElement("div",{className:"col-sm-12"},o.a.createElement("button",{className:"btn btn-sm btn-link",onClick:function(){return a.editingContract()}},"load a previously deployed contract")),a.state.showEditingContract?o.a.createElement("div",null,o.a.createElement("small",{className:"col-sm-12"},"load a previously deployed contract, or, clear the above loaded contract from local storage so you can start over and deploy a brand new one"),o.a.createElement("div",{className:"form-group row"},o.a.createElement("label",{className:"col-sm-2 col-form-label"},"Audit log contract address"),o.a.createElement("div",{className:"col-sm-5"},o.a.createElement("input",{disabled:a.state.modifyingContract,type:"text",className:"form-control",onChange:a.editContractAddressChanged})),o.a.createElement("div",{className:"col-sm-5"},o.a.createElement("button",{disabled:!a.state.editContractAddressValid||a.state.modifyingContract,type:"button",className:"btn btn-sm btn-primary",onClick:function(){return a.changeContractAddress()}},"load contract"),a.state.contractExistsInLocalStorage?o.a.createElement("small",{style:{marginLeft:"15px"}},"or"):null,a.state.contractExistsInLocalStorage?o.a.createElement("button",{style:{marginLeft:"15px"},type:"button",className:"btn btn-sm btn-warning",disabled:a.state.modifyingContract,onClick:function(){return a.clearContract()}},"clear current contract"):null))):null)},S.bindLocalStorage(Object(y.a)(Object(y.a)(a))),S.buildWeb3(Object(y.a)(Object(y.a)(a))),a.state={missingConfig:!1,contractExistsInLocalStorage:!!localStorage.getItem("auditLogContractAddress"),contractAddress:localStorage.getItem("auditLogContractAddress"),validMsg:!1,msg:"",addingMsg:!1,auditRecordCount:0,viewRecordId:0,viewRecordEntityAddress:"",viewPrettyJson:"",viewJsonMessage:"click record on left to view transaction details",showEditingContract:!1,editContractAddress:"",editContractAddressValid:!1,modifyingContract:!1},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"getNumberOfRecords",value:function(){var e=Object(E.a)(g.a.mark(function e(){var t,a;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=S.getContract(this.web3,D,this.state.contractAddress,[]),e.next=3,t.methods.getSize().call();case 3:a=e.sent,this.setState(function(){return{auditRecordCount:Number.parseInt(a)}});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"deployContract",value:function(){var e=Object(E.a)(g.a.mark(function e(){var t,a,n,o,c=this;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.web3.eth.personal.getAccounts();case 2:t=e.sent,a=S.getContract(this.web3,D,"",[]),n=a.encodeABI(),o={from:t[0],gas:5e8,data:n},this.web3.eth.sendTransaction(o).on("receipt",function(e){console.log(e)}).on("error",function(e){console.error("Failed to deploy the smart contract. Error: "+e)}).then(function(e){console.log(e),console.log("\tSmart contract deployed, ready to take calls at '".concat(e.contractAddress,"'")),c.setState(function(){return{contractAddress:e.contractAddress,contractExistsInLocalStorage:!0,modifyingContract:!1}},function(){return localStorage.setItem("auditLogContractAddress",e.contractAddress)})});case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"renderTimelines",value:function(){for(var e=this,t=[],a=100,n=function(a){var n=a%2===0?"#03a9f4":"#6fba1c";t.push(o.a.createElement("div",{key:a+1,style:{cursor:"pointer"},onClick:function(){return e.fetchRecord(a)}},o.a.createElement(P.TimelineBlip,{title:"#".concat(a+1),iconColor:n})))},c=this.state.auditRecordCount-1;c>=0&&a>0;c--,a--)n(c);return t}},{key:"render",value:function(){var e=this;if(this.state.missingConfig)return o.a.createElement(R,{header:"Audit Log"});return o.a.createElement("main",{className:"container"},o.a.createElement("h2",null,"Audit Log"),o.a.createElement("h5",null,"The purpose of this sample is to show how you can use a simple smart contract as an audit log to view records as they're submitted over time."),o.a.createElement("br",null),this.state.contractExistsInLocalStorage?null:o.a.createElement("div",null,o.a.createElement("h6",null,"Step 1: Deploy a new audit log contract to track log records going forward, or, specify a previously deployed audit log contract"),o.a.createElement("div",{className:"col-sm-3"},o.a.createElement("button",{type:"button",className:"btn btn-success",disabled:this.state.modifyingContract,onClick:function(){return e.deployingContract()}},this.state.modifyingContract?"Deploying to blockchain...":"Deploy to blockchain!")),o.a.createElement("small",null,"or"),this.editContractPanel()),this.state.contractAddress?o.a.createElement("div",null,o.a.createElement("h6",null,"The audit log smart contract has been deployed to the following address:",o.a.createElement("i",null," ",this.state.contractAddress),".",o.a.createElement("br",null),this.editContractPanel()),o.a.createElement("br",null),o.a.createElement("h6",null,"Add new log record by calling a function on the smart contract"),o.a.createElement("div",{className:"form-group row"},o.a.createElement("label",{className:"col-sm-2 col-form-label"},"JSON payload"),o.a.createElement("div",{className:"col-sm-7"},o.a.createElement("textarea",{disabled:this.state.addingMsg,onChange:this.msgChanged,className:"form-control",rows:"3",value:this.state.msg})),o.a.createElement("div",{className:"col-sm-3"},o.a.createElement("button",{disabled:this.state.addingMsg||!this.state.validMsg,type:"button",className:"btn btn-primary",onClick:function(){return e.addMsg()}},this.state.addingMsg?"Adding...":"Add"),this.state.msg&&!this.state.validMsg?" invalid json ":"")),this.state.auditRecordCount>0?o.a.createElement("div",null,o.a.createElement("hr",null),o.a.createElement("h6",null,"Audit log history (most recent records appear at top)"),o.a.createElement("br",null),o.a.createElement("div",{className:"row col-sm-12"},o.a.createElement("div",{style:{overflowY:"scroll",maxHeight:"500px",borderRight:"1px solid rgba(0,0,0,.1)"},className:"col-sm-3"},o.a.createElement(P.Timeline,null,this.renderTimelines())),o.a.createElement("div",{className:"col-sm-8"},!this.state.fetchingRecord&&this.state.viewRecordId>0?o.a.createElement("div",null,o.a.createElement("div",{className:"form-group row"},o.a.createElement("label",{className:"col-sm-2 col-form-label"},"Record #"),o.a.createElement("div",{className:"col-sm-10"},o.a.createElement("input",{type:"text",readOnly:!0,className:"form-control-plaintext",value:this.state.viewRecordId}))),o.a.createElement("div",{className:"form-group row"},o.a.createElement("label",{className:"col-sm-2 col-form-label"},"Entity address"),o.a.createElement("div",{className:"col-sm-10"},o.a.createElement("input",{type:"text",readOnly:!0,className:"form-control-plaintext",value:this.state.viewRecordEntityAddress}))),o.a.createElement("div",{className:"form-group row"},o.a.createElement("label",{className:"col-sm-2 col-form-label"},"Payload"),o.a.createElement("div",{className:"col-sm-10"},o.a.createElement(F.a,{id:"json-pretty",json:this.state.viewPrettyJson,className:"form-control-plaintext"})))):o.a.createElement("div",null,this.state.viewJsonMessage)))):null):null)}}]),t}(n.Component),M=function(e){function t(){return Object(s.a)(this,t),Object(i.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return o.a.createElement(u.a,{basename:"/kaleido-samples-gallery"},o.a.createElement("div",null,o.a.createElement("header",{className:""},o.a.createElement("link",{href:"https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css",rel:"stylesheet",integrity:"sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO",crossOrigin:"anonymous"}),o.a.createElement("div",null,o.a.createElement(m.a,{to:"/"},o.a.createElement("button",{className:"btn btn-link"},"Configure")),o.a.createElement(m.a,{to:"/hdwallet"},o.a.createElement("button",{className:"btn btn-link"},"HDWallet")),o.a.createElement(m.a,{to:"/ipfs"},o.a.createElement("button",{className:"btn btn-link"},"IPFS")),o.a.createElement(m.a,{to:"/idregistry"},o.a.createElement("button",{className:"btn btn-link"},"ID Registry")),o.a.createElement(m.a,{to:"/openlaw"},o.a.createElement("button",{className:"btn btn-link"},"OpenLaw")),o.a.createElement(m.a,{to:"/auditlog"},o.a.createElement("button",{className:"btn btn-link"},"Audit Log")))),o.a.createElement("hr",null),o.a.createElement("div",null,o.a.createElement(p.a,{exact:!0,path:"/",component:b}),o.a.createElement(p.a,{exact:!0,path:"/hdwallet",component:k}),o.a.createElement(p.a,{exact:!0,path:"/ipfs",component:A}),o.a.createElement(p.a,{exact:!0,path:"/idregistry",component:_}),o.a.createElement(p.a,{exact:!0,path:"/openlaw",component:j}),o.a.createElement(p.a,{exact:!0,path:"/auditlog",component:T}))))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));r.a.render(o.a.createElement(M,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},36:function(e){e.exports={abi:'[{"constant":true,"inputs":[{"name":"","type":"uint256"}],"name":"logEntries","outputs":[{"name":"entityAddress","type":"address"},{"name":"payload","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"entityAddress","type":"address"},{"name":"payload","type":"string"}],"name":"push","outputs":[{"name":"rowNumber","type":"uint256"}],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"getSize","outputs":[{"name":"size","type":"uint256"}],"payable":false,"stateMutability":"view","type":"function"}]',bytecode:"608060405234801561001057600080fd5b50610438806100206000396000f3006080604052600436106100565763ffffffff7c010000000000000000000000000000000000000000000000000000000060003504166388702ee9811461005b578063cf62fd391461011e578063de8fa431146101a4575b600080fd5b34801561006757600080fd5b506100736004356101b9565b604051808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200180602001828103825283818151815260200191508051906020019080838360005b838110156100e25781810151838201526020016100ca565b50505050905090810190601f16801561010f5780820380516001836020036101000a031916815260200191505b50935050505060405180910390f35b34801561012a57600080fd5b5060408051602060046024803582810135601f810185900485028601850190965285855261019295833573ffffffffffffffffffffffffffffffffffffffff169536956044949193909101919081908401838280828437509497506102899650505050505050565b60408051918252519081900360200190f35b3480156101b057600080fd5b50610192610355565b60008054829081106101c757fe5b600091825260209182902060029182020180546001808301805460408051601f6000199584161561010002959095019092169690960492830187900487028101870190955281855273ffffffffffffffffffffffffffffffffffffffff9092169550919390919083018282801561027f5780601f106102545761010080835404028352916020019161027f565b820191906000526020600020905b81548152906001019060200180831161026257829003601f168201915b5050505050905082565b600061029361035c565b73ffffffffffffffffffffffffffffffffffffffff8481168252602080830185815260008054600180820180845592805286517f290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e5636002909302928301805473ffffffffffffffffffffffffffffffffffffffff19169190971617865592518051939592948794610349937f290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e564019290910190610374565b50505003949350505050565b6000545b90565b60408051808201909152600081526060602082015290565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106103b557805160ff19168380011785556103e2565b828001600101855582156103e2579182015b828111156103e25782518255916020019190600101906103c7565b506103ee9291506103f2565b5090565b61035991905b808211156103ee57600081556001016103f85600a165627a7a723058200362a17e8bced802068bfe6d4a00833614ef6fd4e907bb9039b01a8e5257218c0029",functionHashes:{"getSize()":"de8fa431","logEntries(uint256)":"88702ee9","push(address,string)":"cf62fd39"},gasEstimates:{creation:[257,216e3],external:{"getSize()":429,"logEntries(uint256)":null,"push(address,string)":null},internal:{}},runtimeBytecode:"6080604052600436106100565763ffffffff7c010000000000000000000000000000000000000000000000000000000060003504166388702ee9811461005b578063cf62fd391461011e578063de8fa431146101a4575b600080fd5b34801561006757600080fd5b506100736004356101b9565b604051808373ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200180602001828103825283818151815260200191508051906020019080838360005b838110156100e25781810151838201526020016100ca565b50505050905090810190601f16801561010f5780820380516001836020036101000a031916815260200191505b50935050505060405180910390f35b34801561012a57600080fd5b5060408051602060046024803582810135601f810185900485028601850190965285855261019295833573ffffffffffffffffffffffffffffffffffffffff169536956044949193909101919081908401838280828437509497506102899650505050505050565b60408051918252519081900360200190f35b3480156101b057600080fd5b50610192610355565b60008054829081106101c757fe5b600091825260209182902060029182020180546001808301805460408051601f6000199584161561010002959095019092169690960492830187900487028101870190955281855273ffffffffffffffffffffffffffffffffffffffff9092169550919390919083018282801561027f5780601f106102545761010080835404028352916020019161027f565b820191906000526020600020905b81548152906001019060200180831161026257829003601f168201915b5050505050905082565b600061029361035c565b73ffffffffffffffffffffffffffffffffffffffff8481168252602080830185815260008054600180820180845592805286517f290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e5636002909302928301805473ffffffffffffffffffffffffffffffffffffffff19169190971617865592518051939592948794610349937f290decd9548b62a8d60345a988386fc84ba6bc95484008f6362f93160ef3e564019290910190610374565b50505003949350505050565b6000545b90565b60408051808201909152600081526060602082015290565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106103b557805160ff19168380011785556103e2565b828001600101855582156103e2579182015b828111156103e25782518255916020019190600101906103c7565b506103ee9291506103f2565b5090565b61035991905b808211156103ee57600081556001016103f85600a165627a7a723058200362a17e8bced802068bfe6d4a00833614ef6fd4e907bb9039b01a8e5257218c0029"}},72:function(e){e.exports={abi:'[{"constant":true,"inputs":[],"name":"storedData","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"x","type":"string"}],"name":"set","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[],"name":"get","outputs":[{"name":"retVal","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"inputs":[{"name":"initVal","type":"string"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"}]',bytecode:"608060405234801561001057600080fd5b5060405161044038038061044083398101604052805101805161003a906000906020840190610041565b50506100dc565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f1061008257805160ff19168380011785556100af565b828001600101855582156100af579182015b828111156100af578251825591602001919060010190610094565b506100bb9291506100bf565b5090565b6100d991905b808211156100bb57600081556001016100c5565b90565b610355806100eb6000396000f3006080604052600436106100565763ffffffff7c01000000000000000000000000000000000000000000000000000000006000350416632a1afcd9811461005b5780634ed3885e146100e55780636d4ce63c14610140575b600080fd5b34801561006757600080fd5b50610070610155565b6040805160208082528351818301528351919283929083019185019080838360005b838110156100aa578181015183820152602001610092565b50505050905090810190601f1680156100d75780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b3480156100f157600080fd5b506040805160206004803580820135601f810184900484028501840190955284845261013e9436949293602493928401919081908401838280828437509497506101e39650505050505050565b005b34801561014c57600080fd5b506100706101fa565b6000805460408051602060026001851615610100026000190190941693909304601f810184900484028201840190925281815292918301828280156101db5780601f106101b0576101008083540402835291602001916101db565b820191906000526020600020905b8154815290600101906020018083116101be57829003601f168201915b505050505081565b80516101f6906000906020840190610291565b5050565b60008054604080516020601f60026000196101006001881615020190951694909404938401819004810282018101909252828152606093909290918301828280156102865780601f1061025b57610100808354040283529160200191610286565b820191906000526020600020905b81548152906001019060200180831161026957829003601f168201915b505050505090505b90565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106102d257805160ff19168380011785556102ff565b828001600101855582156102ff579182015b828111156102ff5782518255916020019190600101906102e4565b5061030b92915061030f565b5090565b61028e91905b8082111561030b57600081556001016103155600a165627a7a7230582070960dda9dcda940cebe061050064343c926fd0f1b478822d2deebe9a60db8890029",functionHashes:{"get()":"6d4ce63c","set(string)":"4ed3885e","storedData()":"2a1afcd9"},gasEstimates:{creation:[null,170600],external:{"get()":null,"set(string)":null,"storedData()":null},internal:{}},runtimeBytecode:"6080604052600436106100565763ffffffff7c01000000000000000000000000000000000000000000000000000000006000350416632a1afcd9811461005b5780634ed3885e146100e55780636d4ce63c14610140575b600080fd5b34801561006757600080fd5b50610070610155565b6040805160208082528351818301528351919283929083019185019080838360005b838110156100aa578181015183820152602001610092565b50505050905090810190601f1680156100d75780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b3480156100f157600080fd5b506040805160206004803580820135601f810184900484028501840190955284845261013e9436949293602493928401919081908401838280828437509497506101e39650505050505050565b005b34801561014c57600080fd5b506100706101fa565b6000805460408051602060026001851615610100026000190190941693909304601f810184900484028201840190925281815292918301828280156101db5780601f106101b0576101008083540402835291602001916101db565b820191906000526020600020905b8154815290600101906020018083116101be57829003601f168201915b505050505081565b80516101f6906000906020840190610291565b5050565b60008054604080516020601f60026000196101006001881615020190951694909404938401819004810282018101909252828152606093909290918301828280156102865780601f1061025b57610100808354040283529160200191610286565b820191906000526020600020905b81548152906001019060200180831161026957829003601f168201915b505050505090505b90565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106102d257805160ff19168380011785556102ff565b828001600101855582156102ff579182015b828111156102ff5782518255916020019190600101906102e4565b5061030b92915061030f565b5090565b61028e91905b8082111561030b57600081556001016103155600a165627a7a7230582070960dda9dcda940cebe061050064343c926fd0f1b478822d2deebe9a60db8890029"}},73:function(e){e.exports={abi:'[{"constant":true,"inputs":[],"name":"get","outputs":[{"name":"","type":"string"},{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"Description","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"IpfsHash","outputs":[{"name":"","type":"string"}],"payable":false,"stateMutability":"view","type":"function"},{"inputs":[{"name":"description","type":"string"},{"name":"ipfsHash","type":"string"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"}]',bytecode:"608060405234801561001057600080fd5b506040516105483803806105488339810160405280516020808301519183018051909392909201916100489160009190850190610064565b50805161005c906001906020840190610064565b5050506100ff565b828054600181600116156101000203166002900490600052602060002090601f016020900481019282601f106100a557805160ff19168380011785556100d2565b828001600101855582156100d2579182015b828111156100d25782518255916020019190600101906100b7565b506100de9291506100e2565b5090565b6100fc91905b808211156100de57600081556001016100e8565b90565b61043a8061010e6000396000f3006080604052600436106100565763ffffffff7c01000000000000000000000000000000000000000000000000000000006000350416636d4ce63c811461005b5780638191745f1461014e5780638bf421ee146101d8575b600080fd5b34801561006757600080fd5b506100706101ed565b604051808060200180602001838103835285818151815260200191508051906020019080838360005b838110156100b1578181015183820152602001610099565b50505050905090810190601f1680156100de5780820380516001836020036101000a031916815260200191505b50838103825284518152845160209182019186019080838360005b838110156101115781810151838201526020016100f9565b50505050905090810190601f16801561013e5780820380516001836020036101000a031916815260200191505b5094505050505060405180910390f35b34801561015a57600080fd5b50610163610326565b6040805160208082528351818301528351919283929083019185019080838360005b8381101561019d578181015183820152602001610185565b50505050905090810190601f1680156101ca5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b3480156101e457600080fd5b506101636103b4565b60608060006001818054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156102895780601f1061025e57610100808354040283529160200191610289565b820191906000526020600020905b81548152906001019060200180831161026c57829003601f168201915b5050845460408051602060026001851615610100026000190190941693909304601f8101849004840282018401909252818152959750869450925084019050828280156103175780601f106102ec57610100808354040283529160200191610317565b820191906000526020600020905b8154815290600101906020018083116102fa57829003601f168201915b50505050509050915091509091565b6000805460408051602060026001851615610100026000190190941693909304601f810184900484028201840190925281815292918301828280156103ac5780601f10610381576101008083540402835291602001916103ac565b820191906000526020600020905b81548152906001019060200180831161038f57829003601f168201915b505050505081565b60018054604080516020600284861615610100026000190190941693909304601f810184900484028201840190925281815292918301828280156103ac5780601f10610381576101008083540402835291602001916103ac5600a165627a7a72305820d7adc0e9340cd146407cdaaa9fd40fc80140ad68ebc040afaf909bf9885ddb010029",functionHashes:{"Description()":"8191745f","IpfsHash()":"8bf421ee","get()":"6d4ce63c"},gasEstimates:{creation:[null,216400],external:{"Description()":null,"IpfsHash()":null,"get()":null},internal:{}},runtimeBytecode:"6080604052600436106100565763ffffffff7c01000000000000000000000000000000000000000000000000000000006000350416636d4ce63c811461005b5780638191745f1461014e5780638bf421ee146101d8575b600080fd5b34801561006757600080fd5b506100706101ed565b604051808060200180602001838103835285818151815260200191508051906020019080838360005b838110156100b1578181015183820152602001610099565b50505050905090810190601f1680156100de5780820380516001836020036101000a031916815260200191505b50838103825284518152845160209182019186019080838360005b838110156101115781810151838201526020016100f9565b50505050905090810190601f16801561013e5780820380516001836020036101000a031916815260200191505b5094505050505060405180910390f35b34801561015a57600080fd5b50610163610326565b6040805160208082528351818301528351919283929083019185019080838360005b8381101561019d578181015183820152602001610185565b50505050905090810190601f1680156101ca5780820380516001836020036101000a031916815260200191505b509250505060405180910390f35b3480156101e457600080fd5b506101636103b4565b60608060006001818054600181600116156101000203166002900480601f0160208091040260200160405190810160405280929190818152602001828054600181600116156101000203166002900480156102895780601f1061025e57610100808354040283529160200191610289565b820191906000526020600020905b81548152906001019060200180831161026c57829003601f168201915b5050845460408051602060026001851615610100026000190190941693909304601f8101849004840282018401909252818152959750869450925084019050828280156103175780601f106102ec57610100808354040283529160200191610317565b820191906000526020600020905b8154815290600101906020018083116102fa57829003601f168201915b50505050509050915091509091565b6000805460408051602060026001851615610100026000190190941693909304601f810184900484028201840190925281815292918301828280156103ac5780601f10610381576101008083540402835291602001916103ac565b820191906000526020600020905b81548152906001019060200180831161038f57829003601f168201915b505050505081565b60018054604080516020600284861615610100026000190190941693909304601f810184900484028201840190925281815292918301828280156103ac5780601f10610381576101008083540402835291602001916103ac5600a165627a7a72305820d7adc0e9340cd146407cdaaa9fd40fc80140ad68ebc040afaf909bf9885ddb010029"}}},[[143,2,1]]]);
//# sourceMappingURL=main.83b59427.chunk.js.map